<div
  data-animate-in
  class              = "widget-themis-finish portlet box blue"
  data-ng-controller = "ControllerWidgetExerciseBuilder">
  <div class="portlet-title">
    <h4><span>Template Manager</span></h4>
  </div>
  <div class="portlet-body light-grey">
    <div class="row-fluid">

      <!-- Templates list -->
      <div class="span5 responsive span8">
        <div class="portlet box grey">
          <div class="portlet-title">
            <h4><span>Templates</span></h4>
          </div>
          <!-- portlet body -->
          <div class="portlet-body light-grey">


            <button
              style           = "margin-bottom: 5px;"
              data-ng-hide    = "viewModel.showAddNewTemplate"
              data-ng-animate = "{show: 'fadeIn', hide: 'fadeOut'}"
              data-ng-click   = "viewModel.showAddNewTemplate=true;"
              class           = "btn green btn-block">Add Template <i class="m-icon-swapright m-icon-white"></i></button>

            <table
                  class                                  = "table table-striped table-hover table-bordered dataTable"
                  data-data-table                        = "viewModel.templatesListDataTable.options"
                  data-aa-data                           = "viewModel.templates"
                  data-ao-column-defs                    = "viewModel.templatesListDataTable.columnDefs"
                  data-parent-data-table-view-model-prop = "templatesListDataTable"
                  data-fn-row-callback                   = "">
              <thead>
              <tr>
                  <th class = "sorting">Name</th>
                  <th class = "sorting_disabled"></th>
              </tr>
              </thead>
            </table>



          </div><!-- /portlet body -->
        </div>
      </div><!-- /Templates list -->

      <div class="span7">




        <div
          class           = "portlet box grey"
          style           = "display:none;"
          data-ng-show    = "viewModel.showAddNewTemplate"
          data-ng-animate = "{show: 'slideDown', hide: 'slideUp'}">

          <div class="portlet-title">
            <h4><span>New Template</span></h4>
          </div>

          <!-- portlet body -->
          <div class="portlet-body light-grey">

            <form
              name  = "newTemplateForm"
              class = "form-horizontal" novalidate>

              <div
                data-ng-class = "{success:newTemplateForm.name.$valid, error:!newTemplateForm.name.$valid, 'ng-pristine':newTemplateForm.name.$pristine}"
                class         = "control-group">

                <label class="control-label">Name</label>

                <div class="controls input-icon">

                  <input
                    type              = "text"
                    class             = "span11 m-wrap"
                    name              = "name"
                    data-ng-model     = "viewModel.newTemplateForm.name"
                    data-ng-minlength = "{{clientOrmShare.template.model.name.validate.len[0]}}"
                    data-ng-maxlength = "{{clientOrmShare.template.model.name.validate.len[1]}}"
                    data-unique-field = '{"resource": "template", "property": "name"}'
                    data-required>

                  <span class="input-success">
                    <i class="icon-ok"></i>
                  </span>

                  <span class="input-error">
                    <i class="icon-exclamation-sign"></i>
                  </span>

                  <div class="clear"></div>
                  <span
                    data-ng-show="newTemplateForm.name.$error.minlength"
                    class="help-inline">Name must be longer than {{clientOrmShare.template.model.name.validate.len[0]}} characters</span>

                  <span
                    data-ng-show="newTemplateForm.name.$error.maxlength"
                    class="help-inline">Name must be shorter than {{clientOrmShare.template.model.name.validate.len[1]}} characters</span>

                  <span
                    data-ng-show="newTemplateForm.name.$error.uniqueField"
                    class="help-inline">A template with the name "{{viewModel.newTemplateForm.name}}" already exists</span>

                </div>
              </div><!-- template name control group -->



              <div
                data-ng-class = "{success:newTemplateForm.type.$valid, error:!newTemplateForm.type.$valid, 'ng-pristine':newTemplateForm.type.$pristine}"
                class         = "control-group">

                <label class="control-label">Type</label>

                <div class="controls input-icon">

                  <!-- clientOrmShare.template.model.type.values -->


                  <select
                    name = "type"
                    data-ng-model   = "viewModel.newTemplateForm.type"
                    data-ng-options = "type for type in clientOrmShare.template.model.type.values"
                    data-required
                    class = "m-wrap span6"></select>



                  <div class="clear"></div>
                  <span
                    data-ng-show="newTemplateForm.name.$error.minlength"
                    class="help-inline">Name must be longer than {{clientOrmShare.template.model.name.validate.len[0]}} characters</span>

                  <span
                    data-ng-show="newTemplateForm.name.$error.maxlength"
                    class="help-inline">Name must be shorter than {{clientOrmShare.template.model.name.validate.len[1]}} characters</span>

                  <span
                    data-ng-show="newTemplateForm.name.$error.uniqueField"
                    class="help-inline">A template with the name "{{viewModel.newTemplateForm.name}}" already exists</span>

                </div>
              </div> <!-- template type control group -->




              <div class="row-fluid">
                <div class="span6 responsive span8">
                  <button
                    data-ng-click = "viewModel.clearNewTemplateForm()"
                    class         = "btn red btn-block"><i class="m-icon-swapleft m-icon-white"></i> Cancel</button>
                </div>
                <div class="span6 responsive span8">
                  <button
                    type             = "submit"
                    data-ng-disabled = "newTemplateForm.$invalid"
                    data-ng-click    = "viewModel.postNewTemplate()"
                    class            = "btn green btn-block">Add <i class="m-icon-swapright m-icon-white"></i></button>
                </div>
              </div>

            </form>

          </div><!-- portlet-body -->
        </div><!-- portlet -->





        <div class="portlet box grey">
          <div class="portlet-title">
            <h4><span>Edit Template</span></h4>
          </div>
          <!-- portlet body -->
          <div class="portlet-body light-grey">



            <div data-ng-hide = "viewModel.routeParams.templateUid">
              <div class="box template-info-box fade in ng-scope">
                <div class="inline-content">
                  <strong><i style="vertical-align:middle; margin-top:0;" class="m-icon-big-swapleft"></i></strong><h3>Select Template</h3>
                </div>
              </div>
            </div>







            <div data-ng-show = "viewModel.currentTemplate">




              <div data-ng-hide="true" class="navbar navbar-inverse">

                <div class="navbar-inner" style="border-bottom:1px solid #999;">
                  <div class="container">

                    <div class="nav-collapse collapse navbar-responsive-collapse">

                      <ul class="nav pull-right">
                        <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Add Question <b class="caret"></b></a>
                          <ul class="dropdown-menu">
                            <li><a href="#">Open Response</a></li>
                            <li><a href="#">Select Individual</a></li>
                            <li><a href="#">Select Multiple</a></li>
                            <li><a href="#">Yes / No</a></li>
                            <li><a href="#">Percentage Slider</a></li>
                          </ul>
                        </li>
                      </ul>

                    </div><!-- /.nav-collapse -->
                  </div>

                </div>
              </div>






              <div class="box template-info-box fade in">
                <div class="row-fluid">
                  <div class="span6">
                    <h4><span>{{viewModel.currentTemplate.name}}</span></h4>
                  </div>
                  <div class="span6"></div>

                </div>

              </div>





              <div data-ng-repeat = "(key, group) in viewModel.currentTemplateRevision.groups | toArray">

                <div
                  style="margin-bottom:0;"
                  data-ng-init = "nameEditing=false"
                  class="navbar">

                  <div class="navbar-inner" style="border-bottom:1px solid #DDD;">
                    <div class="container">

                      <span>
                        <a
                          data-ng-hide  = "nameEditing"
                          data-ng-click = "nameEditing=true"
                          class="brand"
                          href>{{group.name}}</a>

                        <form
                          data-ng-show = "nameEditing"
                          class = "navbar-search"
                          novalidate>
                          <input
                            data-ng-model = "group.name"
                            style       = "width:100%;"
                            type        = "text"
                            class       = "search-query span2"
                            placeholder = "">
                        </form>
                      </span>

                    </div>
                  </div>

                  <div class="navbar-inner">
                    <div class="container">

                      <ul class="nav">
                        <li>
                          <a
                            data-ng-hide  = "nameEditing"
                            data-ng-click = "nameEditing = true"
                            href>Edit</a>
                        </li>
                        <li>
                          <a
                            data-ng-show  = "nameEditing"
                            data-ng-click = "nameEditing = false"
                            href>Save</a>
                        </li>
                        <li>
                          <a href="#">Delete</a>
                        </li>
                      </ul>

                      <div class="nav-collapse collapse navbar-responsive-collapse">

                        <ul class="nav pull-right">
                          <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Add Question <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                              <li><a href="#">Open Response</a></li>
                              <li><a href="#">Select Individual</a></li>
                              <li><a href="#">Select Multiple</a></li>
                              <li><a href="#">Yes / No</a></li>
                              <li><a href="#">Percentage Slider</a></li>
                            </ul>
                          </li>
                        </ul>

                      </div><!-- /.nav-collapse -->
                    </div>
                  </div><!-- /navbar-inner -->
                </div><!-- group menu bar -->

                <div class = "box template-info-box fade in">
                  <h3>Info</h3>
                </div><!-- template-info-box -->

              </div>







            </div><!-- /exercise editor -->








          </div><!-- /portlet body -->
        </div>
      </div><!-- /Current Template -->
    </div>
  </div>
</div>



