<div
  data-animate-in
  class              = "widget-themis-finish portlet box blue"
  data-ng-controller = "ControllerWidgetExerciseBuilder">
  <div class="portlet-title">
    <h4><span>Template Manager</span></h4>
  </div>
  <div class="portlet-body light-grey">
    <div class="row-fluid">

      <!-- Templates list -->
      <div class="span5 responsive span8">
        <div class="portlet box grey">
          <div class="portlet-title">
            <h4><span>Templates</span></h4>
          </div>
          <!-- portlet body -->
          <div class="portlet-body light-grey">



            <table
                  class             = "table table-striped table-hover table-bordered dataTable"
                  data-data-table   = "viewModel.dataTable.options"
                  aa-data           = "viewModel.templates"
                  ao-column-defs    = "viewModel.dataTable.columnDefs"
                  fn-row-callback   = "">
              <thead>
              <tr>
                  <th class = "sorting">Name</th>
                  <th class = "sorting"># Revisions</th>
                  <th class = "sorting_disabled">Actions</th>
              </tr>
              </thead>
            </table>




            <ul class="tree">
              <li data-ng-repeat="template in templates">
                <a data-ng-href="#{{viewRoot}}/{{template.uid}}/{{template.revisions[template.revisions.length - 1].uid}}" class="tree-toggle closed">{{template.name}}</a>
                <ul class="branch in">
                  <li data-role="leaf" data-ng-repeat="revision in template.revisions">

                    <a data-ng-class="{true:'bold'}[revision.uid == revisionId]" data-ng-href="#{{viewRoot}}/{{template.uid}}/{{revision.uid}}">
                      <i class="halflings-icon sort-by-attributes"></i>
                      {{$index+1}} - {{revision.createdAt | date:'shortDate'}}<br>
                    </a>

                  </li>
                </ul>
              </li>
            </ul>




          </div><!-- /portlet body -->
        </div>
      </div><!-- /Templates list -->

      <!-- Active Template -->
      <div class="span7">
        <div class="portlet box grey">
          <div class="portlet-title">
            <h4><span>Template Revision</span></h4>
          </div>
          <!-- portlet body -->
          <div class="portlet-body light-grey">



          </div><!-- /portlet body -->
        </div>
      </div><!-- /Active Template -->
    </div>
  </div>
</div>









<div data-ng-hide="true" data-ng-controller="ControllerWidgetExerciseBuilder" class="span12">

  <div data-animate-in data-collapse-widget data-title="Exercise Builder" data-widget-themis="true" data-color="blue">
    <div class="row-fluid">

        <div class="span3 responsive span8">
          <div data-collapse-widget data-title="Templates" data-widget-themis="false" data-color="grey">

            <ul class="tree">
              <li data-ng-repeat="template in templates">
                <a data-ng-href="#{{viewRoot}}/{{template.uid}}/{{template.revisions[template.revisions.length - 1].uid}}" class="tree-toggle closed">{{template.name}}</a>
                <ul class="branch in">
                  <li data-role="leaf" data-ng-repeat="revision in template.revisions">

                    <a data-ng-class="{true:'bold'}[revision.uid == revisionId]" data-ng-href="#{{viewRoot}}/{{template.uid}}/{{revision.uid}}">
                      <i class="halflings-icon sort-by-attributes"></i>
                      {{$index+1}} - {{revision.createdAt | date:'shortDate'}}<br>
                    </a>

                  </li>
                </ul>
              </li>
            </ul>

          </div>
        </div>

        <div class="span9">

          <div data-collapse-widget data-title="Template Editor" data-widget-themis="false" data-color="grey">
            <div class="box template-info-box fade in">

              <div class="row-fluid">

                <div class="span6">
                  <h2 style="margin-top:0px; font-weight:600;" class="alert-heading">{{currentTemplate.name}}</h2>
                  <div class="inline-content">
                    <h4>{{currentTemplate.revisions.length}} revisions</h4>
                  </div>
                </div>

                <div style="text-align:right;" class="span6">

                  <label>Created At</lable>
                  <h4>{{currentTemplateFirstRevision.createdAt | date:'short'}}</h4>
                  <br>
                  <label>Created By</lable>
                  <h4>{{currentTemplateFirstRevision.employee.firstName + ' ' + currentTemplateFirstRevision.employee.lastName}}</h4>

                </div>

              </div>
            </div>

            <div class="">

              <div class="box revision-group-box fade in" data-ng-repeat="group in currentRevision.groups">

                <div class="navbar navbar" style="position: static;">

                  <div class="navbar-inner">
                    <div class="container">

                      <a class="brand" href="#">{{group.name}}</a>

                      <div class="nav-collapse collapse navbar-inverse-collapse">

                        <ul class="nav pull-right">

                          <li><a href>Move Down</a></li>
                          <li><a href>Move Up</a></li>
                          <li><a href>Remove</a></li>

                          <li class="divider-vertical"></li>

                          <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Add Field <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                              <li><a href>Open Response</a></li>
                              <li><a href>Select Individual</a></li>
                              <li><a href>Select Multiple</a></li>
                              <li><a href>Yes/No</a></li>
                              <li><a href>Slider</a></li>
                            </ul>
                          </li>

                        </ul>

                      </div><!-- /.nav-collapse -->

                    </div>
                  </div><!-- /navbar-inner -->

                </div>

                <div class="revision-fields-box" ui-sortable="{connectWith:'.revision-fields-box'}" ng-model="group.fields">

                  <div class="field-box" data-ng-repeat="field in group.fields" data-ng-switch="field.type">
                    CLOSE X

                    <div data-ng-class="open-response" data-ng-switch-when="openResponse" data-ng-include="'viewWidgetExerciseBuilderFieldOpenResponse'"></div>

                  </div>

                </div>

              </div>

            </div>

          </div>

          <div data-ng-show="false" data-collapse-widget data-title="Revision" data-widget-themis="false" data-color="grey">
            Change Summary: {{currentRevision.changeSummary}}

            <ul ui-sortable data-ng-model="currentTemplate.groups">
              <li data-ng-repeat="group in currentTemplate.groups">
                <h3>{{group.name}}</h3>
                <ul style="min-height:10px;" class="children" data-ui-sortable="{connectWith:'.children'}" data-ng-model="group.fields">
                  <li data-ng-repeat="field in group.fields">{{field.uid}}</li>
                </ul>
              </li>
            </ul>

          </div>

        </div>

    </div>

  </div>

</div>
