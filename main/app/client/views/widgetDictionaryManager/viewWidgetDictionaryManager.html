<div
  class="widget-themis-finish portlet box blue"
  data-animate-in
  data-ng-controller="ControllerWidgetDictionaryManager">

  <div class="portlet-title">
    <h4><span>Dictionary Manager</span></h4>
  </div>

  <div class="portlet-body light-grey">






    <div class="row-fluid">
      <div class="span5 responsive span8">



        <!-- Dictionaries List -->
        <div class="portlet box grey">

          <div class="portlet-title">
            <h4><span>Dictionaries</span></h4>
          </div>

          <div class="portlet-body light-grey">

            <button
              data-ng-hide="viewModel.showAddNewDictionary"
              data-ng-animate="{show: 'fadeIn', hide: 'fadeOut'}"
              data-ng-click="viewModel.showAddNewDictionary=true;"
              class="btn green btn-block">New Dictionary <i class="m-icon-swapright m-icon-white"></i></button>



            <table
                  class             = "table table-striped table-hover table-bordered dataTable"
                  data-data-table   = "viewModel.dictionaryListOptions"
                  aa-data           = "viewModel.dictionaries"
                  ao-column-defs    = "viewModel.columnDefsDictionaryList"
                  data-parent-model = "viewModel"
                  fn-row-callback   = "myCallback">
              <thead>
              <tr>
                  <th class="sorting">Name</th>
                  <th class="sorting"># Items</th>
                  <th class="sorting_disabled">Actions</th>
              </tr>
              </thead>
            </table>




            <table data-ng-hide="true" class="table table-striped table-bordered table-hover dataTable">
              <thead></thead>
              <tbody>
                <tr data-ng-repeat="dictionary in viewModel.dictionaries | toArray | orderBy:'name'">
                  <td>
                    <a data-ng-href="#{{viewRoot}}/{{dictionary.uid}}">
                      {{dictionary.name}} ({{ getKeysLength(dictionary.dictionaryItems) }})
                    </a>
                  </td>
                </tr>
              </tbody>
            </table>

          </div>
        </div><!-- /Dictionaries List -->


      </div>
      <div class="span7">



        <!-- new dictionary form -->
        <div
          style="display:none;"
          class="portlet box grey"
          data-ng-show="viewModel.showAddNewDictionary"
          data-ng-animate="{show: 'slideDown', hide: 'slideUp'}">

          <div class="portlet-title">
            <h4><span>New Dictionary</span></h4>
          </div>

          <div class="portlet-body light-gray">

            <form name="newDictionaryForm" class="form-horizontal" novalidate>

              <div
                data-ng-class="{success:newDictionaryForm.name.$valid, error:!newDictionaryForm.name.$valid, 'ng-pristine':newDictionaryForm.name.$pristine}"
                class="control-group">

                <label class="control-label">Name</label>

                <div class="controls input-icon">

                  <input
                    type          = "text"
                    class         = "span6 m-wrap"
                    name          = "name"
                    data-ng-model = "viewModel.newDictionaryForm.name"
                    data-ng-minlength = "{{clientOrmShare.dictionary.model.name.validate.len[0]}}"
                    data-ng-maxlength = "{{clientOrmShare.dictionary.model.name.validate.len[1]}}"
                    data-unique-field = '{"resource": "dictionary", "property": "name"}'
                    data-required>

                  <span class="input-success">
                    <i class="icon-ok"></i>
                  </span>

                  <span class="input-error">
                    <i class="icon-exclamation-sign"></i>
                  </span>

                  <div class="clear"></div>
                  <span
                    data-ng-show="newDictionaryForm.name.$error.minlength"
                    class="help-inline">Name must be longer than {{clientOrmShare.dictionary.model.name.validate.len[0]}} characters</span>

                  <span
                    data-ng-show="newDictionaryForm.name.$error.maxlength"
                    class="help-inline">Name must be shorter than {{clientOrmShare.dictionary.model.name.validate.len[1]}} characters</span>

                  <span
                    data-ng-show="newDictionaryForm.name.$error.uniqueField"
                    class="help-inline">A dictionary with the name "{{viewModel.newDictionaryForm.name}}" already exists</span>

                </div>
              </div>

              <div class="row-fluid">
                <div class="span6 responsive span8">
                  <button
                    data-ng-click="viewModel.showAddNewDictionary=false; newDictionaryForm.$setPristine(); viewModel.newDictionaryForm = {}"
                    class="btn red btn-block"><i class="m-icon-swapleft m-icon-white"></i> Cancel</button>
                </div>
                <div class="span6 responsive span8">
                  <button
                    type="submit"
                    data-ng-disabled="newDictionaryForm.$invalid"
                    data-ng-click="viewModel.postNewDictionary(); viewModel.showAddNewDictionary = false; newDictionaryForm.$setPristine(); viewModel.newDictionaryForm = {}"
                    class="btn green btn-block">Add <i class="m-icon-swapright m-icon-white"></i></button>
                </div>
              </div>

            </form>

          </div>
        </div><!-- /new dictionary form -->



        <!-- Active Dictionary Items -->
        <div class="portlet box grey">

          <div class="portlet-title">
            <h4><span>Dictionary Items</span></h4>
          </div>

          <div class="portlet-body light-grey">


            <table
                  class           = "table table-striped table-hover table-bordered dataTable"
                  data-data-table = "viewModel.dictionaryItemsOptions"
                  aa-data         = "viewModel.dictionaries[viewModel.activeDictionaryUid].dictionaryItems"
                  ao-column-defs  = "viewModel.columnDefsActiveDictionaryItems"
                  fn-row-callback = "myCallback">
              <thead>
              <tr>
                  <th class="sorting">Name</th>
                  <th class="sorting">Actions</th>
              </tr>
              </thead>
            </table>


          </div>
        </div><!-- /Active Dictionary Items -->


      </div><!-- /span9 -->
    </div>
  </div>
</div>
